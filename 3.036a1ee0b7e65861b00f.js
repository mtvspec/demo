(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{t3FR:function(e,t,n){"use strict";n.r(t),n.d(t,"UserFriendsModule",function(){return L});var i=n("ofXK"),r=n("tyNb"),c=n("lJxs"),s=n("fXoL"),o=n("GzcL"),a=n("/IUn");let u=(()=>{class e{constructor(e){this.apollo=e}fetchViewerBasicInfo(){return this.apollo.query({query:o.X,fetchPolicy:"no-cache"})}fetchViewerFriendRequestList(){return this.apollo.query({query:o.Y,fetchPolicy:"no-cache"})}sendFriendRequest(e){return this.apollo.mutate({mutation:o.K,fetchPolicy:"no-cache",variables:{user:e}})}acceptFriendRequest(e){return this.apollo.mutate({mutation:o.a,fetchPolicy:"no-cache",variables:{id:e}})}rejectFriendRequest(e){return this.apollo.mutate({mutation:o.H,fetchPolicy:"no-cache",variables:{id:e}})}deleteFriendRequest(e){return this.apollo.mutate({mutation:o.y,fetchPolicy:"no-cache",variables:{id:e}})}removeFriend(e){return this.apollo.mutate({mutation:o.J,fetchPolicy:"no-cache",variables:{id:e}})}}return e.\u0275fac=function(t){return new(t||e)(s.Tb(a.c))},e.\u0275prov=s.Fb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var d=n("xdv0"),l=n("4kJo");const f=function(e){return["/accounts",e]};function b(e,t){if(1&e){const e=s.Qb();s.Pb(0,"div",2),s.Kb(1,"app-user-avatar"),s.Pb(2,"span",3),s.qc(3),s.Ob(),s.Kb(4,"div",4),s.Pb(5,"button",5),s.Wb("click",function(){s.kc(e);const n=t.$implicit;return s.Yb(2).removeFriend(n.id)}),s.qc(6,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0438\u0437 \u0434\u0440\u0443\u0437\u0435\u0439"),s.Ob(),s.Ob()}if(2&e){const e=t.$implicit;s.ec("routerLink",s.gc(2,f,e.id)),s.zb(3),s.sc(" ",e.name," ")}}function p(e,t){if(1&e&&(s.Nb(0),s.Pb(1,"h1"),s.qc(2,"\u0414\u0440\u0443\u0437\u044c\u044f"),s.Ob(),s.pc(3,b,7,4,"div",1),s.Mb()),2&e){const e=t.ngIf;s.zb(3),s.ec("ngForOf",e.nodes)}}let g=(()=>{class e{constructor(e,t){this.friendsService=e,this.userService=t}ngOnInit(){this.fetchFriendList()}fetchFriendList(){this.friendList$=this.userService.fetchUserList({friend:!0}).pipe(Object(c.a)(e=>e.data.users))}removeFriend(e){this.friendsService.removeFriend(e).subscribe(e=>{var t;!0===(null===(t=e.data)||void 0===t?void 0:t.payload)&&this.fetchFriendList()})}}return e.\u0275fac=function(t){return new(t||e)(s.Jb(u),s.Jb(d.a))},e.\u0275cmp=s.Db({type:e,selectors:[["app-friend-list"]],decls:2,vars:3,consts:[[4,"ngIf"],["class","user panel row",3,"routerLink",4,"ngFor","ngForOf"],[1,"user","panel","row",3,"routerLink"],[1,"user-name"],[1,"empty-space"],[1,"primary",3,"click"]],template:function(e,t){1&e&&(s.pc(0,p,4,1,"ng-container",0),s.Zb(1,"async")),2&e&&s.ec("ngIf",s.ac(1,1,t.friendList$))},directives:[i.l,i.k,r.c,l.a],pipes:[i.b],styles:[".user[_ngcontent-%COMP%]{align-items:center}.user[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{padding-left:12px;font-size:14px;font-family:var(--primary-font-family);font-weight:500}.user[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0}"]}),e})();function h(e,t){if(1&e){const e=s.Qb();s.Nb(0),s.Pb(1,"div",2),s.Kb(2,"app-user-avatar"),s.Pb(3,"span",3),s.qc(4),s.Ob(),s.Kb(5,"div",4),s.Pb(6,"button",5),s.Wb("click",function(){s.kc(e);const n=t.$implicit;return s.Yb(2).acceptFriendRequest(n.id)}),s.qc(7,"\u041f\u0440\u0438\u043d\u044f\u0442\u044c"),s.Ob(),s.Pb(8,"button",6),s.Wb("click",function(){s.kc(e);const n=t.$implicit;return s.Yb(2).rejectFriendRequest(n.id)}),s.qc(9,"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"),s.Ob(),s.Ob(),s.Mb()}if(2&e){const e=t.$implicit;s.zb(4),s.rc(e.createdBy.name)}}function v(e,t){if(1&e&&(s.Nb(0),s.Pb(1,"h1"),s.qc(2,"\u0417\u0430\u043f\u0440\u043e\u0441\u044b \u0432 \u0434\u0440\u0443\u0437\u044c\u044f"),s.Ob(),s.pc(3,h,10,1,"ng-container",1),s.Mb()),2&e){const e=t.ngIf;s.zb(3),s.ec("ngForOf",e.requests.friend.nodes)}}let m=(()=>{class e{constructor(e){this.friendsService=e}ngOnInit(){this.fetchFriendRequestList()}fetchFriendRequestList(){this.viewer$=this.friendsService.fetchViewerFriendRequestList().pipe(Object(c.a)(e=>e.data.viewer))}acceptFriendRequest(e){this.friendsService.acceptFriendRequest(e).subscribe(e=>{var t;!0===(null===(t=e.data)||void 0===t?void 0:t.payload)&&this.fetchFriendRequestList()})}rejectFriendRequest(e){this.friendsService.rejectFriendRequest(e).subscribe(e=>{var t;!0===(null===(t=e.data)||void 0===t?void 0:t.payload)&&this.fetchFriendRequestList()})}}return e.\u0275fac=function(t){return new(t||e)(s.Jb(u))},e.\u0275cmp=s.Db({type:e,selectors:[["app-user-friend-request-list"]],decls:2,vars:3,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"panel","child","row","request"],[1,"user-name"],[1,"empty-space"],[1,"primary",3,"click"],[1,"danger",3,"click"]],template:function(e,t){1&e&&(s.pc(0,v,4,1,"ng-container",0),s.Zb(1,"async")),2&e&&s.ec("ngIf",s.ac(1,1,t.viewer$))},directives:[i.l,i.k,l.a],pipes:[i.b],styles:[".panel[_ngcontent-%COMP%]{padding:8px}.request[_ngcontent-%COMP%]{align-items:center}.request[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{padding-left:12px;font-size:14px;font-family:var(--primary-font-family);font-weight:500}.request[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 0 0 8px}"]}),e})();function O(e,t){if(1&e){const e=s.Qb();s.Pb(0,"button",7),s.Wb("click",function(){s.kc(e);const t=s.Yb().$implicit;return s.Yb(2).sendFriendRequest(t.id)}),s.qc(1,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0434\u0440\u0443\u0437\u044c\u044f"),s.Ob()}}function P(e,t){if(1&e){const e=s.Qb();s.Pb(0,"button",8),s.Wb("click",function(){s.kc(e);const t=s.Yb().$implicit;return s.Yb(2).deleteFriendRequest(t.friendRequest)}),s.qc(1,"\u041e\u0442\u043e\u0437\u0432\u0430\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441"),s.Ob()}}function y(e,t){if(1&e&&(s.Pb(0,"div",2),s.Kb(1,"app-user-avatar"),s.Pb(2,"span",3),s.qc(3),s.Ob(),s.Kb(4,"div",4),s.Pb(5,"div"),s.qc(6),s.Zb(7,"json"),s.Ob(),s.pc(8,O,2,0,"button",5),s.pc(9,P,2,0,"button",6),s.Ob()),2&e){const e=t.$implicit;s.zb(3),s.sc(" ",e.name," "),s.zb(3),s.rc(s.ac(7,4,e.friend)),s.zb(2),s.ec("ngIf",!(null!=e.friendRequest&&e.friendRequest.id)),s.zb(1),s.ec("ngIf",null==e.friendRequest?null:e.friendRequest.id)}}function q(e,t){if(1&e&&(s.Nb(0),s.Pb(1,"h1"),s.qc(2,"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438"),s.Ob(),s.pc(3,y,10,6,"div",1),s.Mb()),2&e){const e=t.ngIf;s.zb(3),s.ec("ngForOf",e.nodes)}}let F=(()=>{class e{constructor(e,t){this.userService=e,this.friendService=t}ngOnInit(){this.fetchUserList()}fetchUserList(){this.userList$=this.userService.fetchUserList({friend:!1}).pipe(Object(c.a)(e=>e.data.users))}sendFriendRequest(e){this.friendService.sendFriendRequest(e).subscribe(e=>{var t;(null===(t=e.data)||void 0===t?void 0:t.payload.id)&&(this.userList$=this.userService.fetchUserList({friend:!1}).pipe(Object(c.a)(e=>e.data.users)))})}deleteFriendRequest(e){this.friendService.deleteFriendRequest(e.id).subscribe(e=>{var t;!0===(null===(t=e.data)||void 0===t?void 0:t.payload)&&this.fetchUserList()})}}return e.\u0275fac=function(t){return new(t||e)(s.Jb(d.a),s.Jb(u))},e.\u0275cmp=s.Db({type:e,selectors:[["app-user-list"]],decls:2,vars:3,consts:[[4,"ngIf"],["class","user panel row",4,"ngFor","ngForOf"],[1,"user","panel","row"],[1,"user-name"],[1,"empty-space"],["class","primary",3,"click",4,"ngIf"],["class","danger",3,"click",4,"ngIf"],[1,"primary",3,"click"],[1,"danger",3,"click"]],template:function(e,t){1&e&&(s.pc(0,q,4,1,"ng-container",0),s.Zb(1,"async")),2&e&&s.ec("ngIf",s.ac(1,1,t.userList$))},directives:[i.l,i.k,l.a],pipes:[i.b,i.g],styles:[".user[_ngcontent-%COMP%]{align-items:center}.user[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{padding-left:12px;font-size:14px;font-family:var(--primary-font-family);font-weight:500}.user[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0}"]}),e})();var M=n("gylQ");function C(e,t){if(1&e&&(s.Nb(0),s.Pb(1,"ul",2),s.Pb(2,"li",3),s.Pb(3,"a"),s.qc(4),s.Ob(),s.Ob(),s.Pb(5,"li",4),s.Pb(6,"a"),s.qc(7),s.Ob(),s.Ob(),s.Ob(),s.Mb()),2&e){const e=t.ngIf;s.zb(4),s.sc("\u0414\u0440\u0443\u0437\u044c\u044f ",0===e.friends.count?"":e.friends.count,""),s.zb(3),s.sc("\u0417\u0430\u043f\u0440\u043e\u0441\u044b \u0432 \u0434\u0440\u0443\u0437\u044c\u044f ",0===e.requests.friend.count?"":e.requests.friend.count,"")}}const _=[{path:"",component:(()=>{class e{constructor(e){this.friendsService=e}ngOnInit(){this.viewerBasicInfo$=this.friendsService.fetchViewerBasicInfo().pipe(Object(c.a)(e=>e.data.viewer))}}return e.\u0275fac=function(t){return new(t||e)(s.Jb(u))},e.\u0275cmp=s.Db({type:e,selectors:[["app-user-friends"]],decls:4,vars:4,consts:[[3,"title"],[4,"ngIf"],[1,"tabs"],["routerLinkActive","active","routerLink","friends"],["routerLinkActive","active","routerLink","requests"]],template:function(e,t){1&e&&(s.Kb(0,"app-title-nav-bar",0),s.pc(1,C,8,2,"ng-container",1),s.Zb(2,"async"),s.Kb(3,"router-outlet")),2&e&&(s.ec("title","\u0414\u0440\u0443\u0437\u044c\u044f"),s.zb(1),s.ec("ngIf",s.ac(2,2,t.viewerBasicInfo$)))},directives:[M.a,i.l,r.g,r.d,r.c],pipes:[i.b],styles:["ul.tabs[_ngcontent-%COMP%]{margin:15px;padding:0;list-style:none;border-radius:6px}ul.tabs[_ngcontent-%COMP%], ul.tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}ul.tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0;padding:6px 12px;background-color:var(--primary-bg);box-shadow:0 0 1px 0 #0000001a;border:1px solid #969696}ul.tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:14px;font-family:var(--primary-font-family);color:#969696;text-decoration:none}ul.tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child{border-top-left-radius:6px;border-bottom-left-radius:6px}ul.tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{border-top-right-radius:6px;border-bottom-right-radius:6px}ul.tabs[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background-color:#969696}ul.tabs[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}"]}),e})(),children:[{path:"requests",component:m},{path:"users",component:F},{path:"friends",component:g},{path:"",pathMatch:"full",redirectTo:"friends"}]}];let k=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.Hb({type:e}),e.\u0275inj=s.Gb({imports:[[r.f.forChild(_)],r.f]}),e})();var w=n("PCNd");let L=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.Hb({type:e}),e.\u0275inj=s.Gb({imports:[[i.c,w.a,k]]}),e})()}}]);